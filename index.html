<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Perpustakaan MTsS Nurul Kamal</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https.cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

    <div class="app-container">
        
        <nav class="sidebar">
            <div class="sidebar-header">
                <img src="logo.png" alt="Logo MTsS Nurul Kamal" class="sidebar-logo">
                <h2>MTsS Nurul Kamal</h2>
                <h2>Sambirejo</h2>
                <p>Perpustakaan Digital</p>
            </div>
            <ul class="sidebar-menu">
                <li class="menu-item"> 
                    <a href="#katalog-buku" data-target="katalog-buku">
                        <i class="fas fa-book"></i> Katalog Buku
                    </a>
                </li>
                <li class="menu-item">
                    <a href="#anggota" data-target="anggota">
                        <i class="fas fa-users"></i> Data Anggota
                    </a>
                </li>
                <li class="menu-item">
                    <a href="#dashboard-statistik" data-target="dashboard-statistik">
                        <i class="fas fa-chart-line"></i> Dashboard
                    </a>
                </li>
                <li class="menu-item">
                    <a href="#riwayat-pinjam" data-target="riwayat-pinjam">
                        <i class="fas fa-history"></i> Riwayat Pinjam
                    </a>
                </li>
                <li class="menu-item">
                    <a href="#sirkulasi-pinjam" data-target="sirkulasi-pinjam">
                        <i class="fas fa-sign-out-alt"></i> Pinjam Buku
                    </a>
                </li>
                <li class="menu-item">
                    <a href="#sirkulasi-kembali" data-target="sirkulasi-kembali">
                        <i class="fas fa-sign-in-alt"></i> Kembalikan Buku
                    </a>
                </li>
                <li class="menu-item">
                    <a href="#admin-pengaturan" data-target="admin-pengaturan">
                        <i class="fas fa-cog"></i> Pengaturan
                    </a>
                </li>
            </ul>
        </nav>

        <div class="main-content">
            <header class="top-header">
                <h1>Sistem Informasi Perpustakaan</h1>
            </header>

            <main class="content-area">
                
                <section id="katalog-buku" class="content-section">
                    <h2>Katalog Buku (Ringkasan Stok)</h2>
                    <input type="text" id="filterBuku" placeholder="Cari judul, pengarang, atau penerbit..." autocomplete="tulis-acak-disini">
                    <div class="tabel-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Judul Buku</th>
                                    <th>Pengarang</th>
                                    <th>Penerbit</th>
                                    <th>Total Stok</th>
                                    <th>Stok Tersedia</th>
                                </tr>
                            </thead>
                            <tbody id="tabel-buku"></tbody>
                        </table>
                    </div>
                </section>

                <section id="anggota" class="content-section">
                    <h2>Data Anggota</h2>
                    <input type="text" id="filterAnggota" placeholder="Cari nama, NIS, atau kelas..." autocomplete="tulis-acak-disini">
                    <div class="tabel-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>NIS</th>
                                    <th>Nama Lengkap</th>
                                    <th>Kelas</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody id="tabel-anggota"></tbody>
                        </table>
                    </div>
                </section>

                <section id="dashboard-statistik" class="content-section">
                    <h2>Dashboard Statistik</h2>
                    <div class="statistik-grid">
                        <div class="card bg-green">
                            <h3>Total Judul Buku</h3>
                            <p id="total-judul-buku">0</p>
                        </div>
                        <div class="card bg-blue">
                            <h3>Buku Tersedia</h3>
                            <p id="buku-tersedia">0</p>
                        </div>
                        <div class="card bg-red">
                            <h3>Buku Dipinjam</h3>
                            <p id="buku-dipinjam">0</p>
                        </div>
                    </div>

                    <hr style="margin: 30px 0;">

                    <h2>Statistik Peminjaman & Penambahan Buku</h2>
                    
                    <div class="form-section" style="padding: 10px 15px 5px 15px; margin-bottom: 20px;">
                        <label for="filterTahunGrafik">Tampilkan Grafik Peminjaman Bulanan untuk Tahun:</label>
                        <select id="filterTahunGrafik"></select>
                    </div>

                    <div class="statistik-grid">
                        <div class="chart-container">
                            <canvas id="grafikBulanan"></canvas>
                        </div>
                        <div class="chart-container">
                            <canvas id="grafikTahunan"></canvas>
                        </div>
                    </div>
                    
                    <div class="chart-container" style="margin-top: 20px;">
                        <canvas id="grafikAkuisisiBuku"></canvas>
                    </div>
                    </section>

                <section id="riwayat-pinjam" class="content-section">
                    <h2>Riwayat Peminjaman</h2>
                    <p>Menampilkan 50 transaksi terbaru.</p>
                    <div class="tabel-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Tanggal & Waktu</th>
                                    <th>No. Inventaris</th>
                                    <th>Judul Buku</th>
                                    <th>NIS</th>
                                    <th>Nama Peminjam</th>
                                    <th>Status Aksi</th>
                                </tr>
                            </thead>
                            <tbody id="tabel-history"></tbody>
                        </table>
                    </div>
                </section>

                <section id="sirkulasi-pinjam" class="content-section">
                    <h2>Form Peminjaman Buku</h2>
                    <div class="form-section">
                        <label for="pinjam-no-inventaris">1. Pilih Buku (Hanya buku tersedia):</label>
                        <select id="pinjam-no-inventaris">
                            <option value="">-- Memuat data buku... --</option>
                        </select>
                        <label for="pinjam-kelas">2. Pilih Kelas Peminjam:</label>
                        <select id="pinjam-kelas">
                            <option value="">-- Memuat data anggota... --</option>
                        </select>
                        <label for="pinjam-nama">3. Pilih Nama Peminjam:</label>
                        <select id="pinjam-nama">
                            <option value="">-- Pilih kelas terlebih dahulu --</option>
                        </select>
                        <label for="pinjam-nis">4. NIS Peminjam (Otomatis):</label>
                        <input type="text" id="pinjam-nis" placeholder="NIS akan muncul di sini..." readonly>
                        <label for="pinjam-password">5. Password Admin:</label>
                        <input type="password" id="pinjam-password" placeholder="Masukkan password admin...">
                        <button id="btn-proses-pinjam" class="btn btn-primary">Proses Peminjaman</button>
                        <p id="pinjam-feedback" class="feedback-message"></p>
                    </div>
                </section>
                
                <section id="sirkulasi-kembali" class="content-section">
                    <h2>Form Pengembalian Buku</h2>
                    <div class="form-section">
                        <label for="kembali-no-inventaris">1. Pilih Buku (Hanya buku dipinjam):</label>
                        <select id="kembali-no-inventaris">
                            <option value="">-- Memuat data buku... --</option>
                        </select>
                        <label for="kembali-password">2. Password Admin:</label>
                        <input type="password" id="kembali-password" placeholder="Masukkan password admin...">
                        <label for="kembali-denda">3. Denda Keterlambatan (Otomatis):</label>
                        <input type="text" id="kembali-denda" placeholder="Denda akan muncul di sini..." readonly style="background-color: #eee; color: #991b1b; font-weight: bold;">
                        <button id="btn-proses-kembali" class="btn btn-warning">Proses Pengembalian</button>
                        <p id="kembali-feedback" class="feedback-message"></p>
                    </div>
                </section>

                <section id="admin-pengaturan" class="content-section">
                    <h2>Pengaturan & Admin</h2>

                    <div class="sub-nav">
                        <ul>
                            <li class="sub-nav-item active" data-sub-target="sub-denda"><i class="fas fa-sliders-h"></i> Pengaturan Denda</li>
                            <li class="sub-nav-item" data-sub-target="sub-tambah-buku"><i class="fas fa-plus-circle"></i> Tambah Buku</li>
                            <li class="sub-nav-item" data-sub-target="sub-tambah-anggota"><i class="fas fa-user-plus"></i> Tambah Anggota</li>
                            <li class="sub-nav-item" data-sub-target="sub-edit-buku"><i class="fas fa-book-medical"></i> Manajemen Buku</li>
                            <li class="sub-nav-item" data-sub-target="sub-edit-anggota"><i class="fas fa-edit"></i> Manajemen Anggota</li>
                        </ul>
                    </div>

                    <div id="sub-denda" class="sub-content-section active">
                        <p>Ubah pengaturan denda dan lama peminjaman di sini.</p>
                        <div class="form-section">
                            <label for="setting-hari">1. Lama Peminjaman (Hari):</label>
                            <input type="number" id="setting-hari" placeholder="Contoh: 7">
                            <label for="setting-denda">2. Denda per Hari (Rupiah):</label>
                            <input type="number" id="setting-denda" placeholder="Contoh: 1000">
                            <label for="setting-password">3. Password Admin (Wajib):</label>
                            <input type="password" id="setting-password" placeholder="Masukkan password admin...">
                            <button id="btn-simpan-pengaturan" class="btn btn-success">Simpan Pengaturan</button>
                            <p id="setting-feedback" class="feedback-message"></p>
                        </div>
                    </div>
                    
                    <div id="sub-tambah-buku" class="sub-content-section">
                        <p>Tambahkan buku baru ke Google Sheet "Katalog Buku".</p>
                        <div class="form-section">
                            <label for="buku-inventaris">No. Inventaris:</label>
                            <input type="text" id="buku-inventaris" placeholder="Contoh: 001/MTs/2025">
                            <label for="buku-judul">Judul Buku:</label>
                            <input type="text" id="buku-judul" placeholder="Contoh: Bahasa Indonesia Kelas VII">
                            <label for="buku-pengarang">Pengarang:</label>
                            <input type="text" id="buku-pengarang" placeholder="Contoh: Budi">
                            <label for="buku-penerbit">Penerbit:</label>
                            <input type="text" id="buku-penerbit" placeholder="Contoh: Erlangga">
                            <label for="buku-password">Password Admin (Wajib):</label>
                            <input type="password" id="buku-password" placeholder="Masukkan password admin...">
                            <button id="btn-tambah-buku" class="btn btn-primary">Tambah Buku</button>
                            <p id="buku-feedback" class="feedback-message"></p>
                        </div>
                    </div>

                    <div id="sub-tambah-anggota" class="sub-content-section">
                        <p>Tambahkan siswa baru ke Google Sheet "Anggota".</p>
                        <div class="form-section">
                            <label for="anggota-nis">NIS:</label>
                            <input type="text" id="anggota-nis" placeholder="Contoh: 123456">
                            <label for="anggota-nama">Nama Lengkap:</label>
                            <input type="text" id="anggota-nama" placeholder="Contoh: Budi Setiawan">
                            <label for="anggota-kelas">Kelas:</label>
                            <input type="text" id="anggota-kelas" placeholder="Contoh: VII-A">
                            <label for="anggota-status">Status (Opsional):</label>
                            <input type="text" id="anggota-status" placeholder="Contoh: Aktif">
                            <label for="anggota-password">Password Admin (Wajib):</label>
                            <input type="password" id="anggota-password" placeholder="Masukkan password admin...">
                            <button id="btn-tambah-anggota" class="btn btn-primary">Tambah Anggota</button>
                            <p id="anggota-feedback" class="feedback-message"></p>
                        </div>
                    </div>
                    
                    <div id="sub-edit-buku" class="sub-content-section">
                        <p>Pilih buku berdasarkan No. Inventaris unik untuk mengubah atau menghapus datanya.</p>
                        <div class="form-section">
                            <label for="select-edit-buku">1. Pilih Buku (berdasarkan No. Inventaris):</label>
                            <select id="select-edit-buku">
                                <option value="">-- Memuat data buku... --</option>
                            </select>
                            <label for="edit-buku-inventaris">No. Inventaris (Kunci Utama - Tidak bisa diubah):</label>
                            <input type="text" id="edit-buku-inventaris" readonly style="background-color: #eee;">
                            <label for="edit-buku-judul">Judul Buku:</label>
                            <input type="text" id="edit-buku-judul" placeholder="Judul akan muncul di sini...">
                            <label for="edit-buku-pengarang">Pengarang:</label>
                            <input type="text" id="edit-buku-pengarang" placeholder="Pengarang akan muncul di sini...">
                            <label for="edit-buku-penerbit">Penerbit:</label>
                            <input type="text" id="edit-buku-penerbit" placeholder="Penerbit akan muncul di sini...">
                            <label for="edit-buku-password">Password Admin (Wajib):</label>
                            <input type="password" id="edit-buku-password" placeholder="Masukkan password admin...">
                            <div class="button-group">
                                <button id="btn-update-buku" class="btn btn-success">Update Buku</button>
                                <button id="btn-hapus-buku" class="btn btn-danger">Hapus Buku</button>
                            </div>
                            <p id="edit-buku-feedback" class="feedback-message"></p>
                        </div>
                    </div>

                    <div id="sub-edit-anggota" class="sub-content-section">
                        <p>Pilih anggota dari daftar untuk mengubah atau menghapus data.</p>
                        <div class="form-section">
                            <label for="select-edit-anggota">1. Pilih Anggota:</label>
                            <select id="select-edit-anggota">
                                <option value="">-- Memuat data anggota... --</option>
                            </select>
                            <label for="edit-anggota-nis">NIS (Kunci Utama - Tidak bisa diubah):</label>
                            <input type="text" id="edit-anggota-nis" readonly style="background-color: #eee;">
                            <label for="edit-anggota-nama">Nama Lengkap:</label>
                            <input type="text" id="edit-anggota-nama" placeholder="Nama akan muncul di sini...">
                            <label for="edit-anggota-kelas">Kelas:</label>
                            <input type="text" id="edit-anggota-kelas" placeholder="Kelas akan muncul di sini...">
                            <label for="edit-anggota-status">Status:</label>
                            <input type="text" id="edit-anggota-status" placeholder="Status akan muncul di sini...">
                            <label for="edit-anggota-password">Password Admin (Wajib):</label>
                            <input type="password" id="edit-anggota-password" placeholder="Masukkan password admin...">
                            <div class="button-group">
                                <button id="btn-update-anggota" class="btn btn-success">Update Anggota</button>
                                <button id="btn-hapus-anggota" class="btn btn-danger">Hapus Anggota</button>
                            </div>
                            <p id="edit-anggota-feedback" class="feedback-message"></p>
                        </div>
                    </div>

                </section>

            </main>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>

